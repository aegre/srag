---
import Layout from './Layout.astro';
import { buildCoupleDisplayName } from '../utils/textUtils';

export interface Props {
  title?: string;
  description?: string;
  guestName: string;
  guestLastname: string | null;
  secondaryName: string | null;
  secondaryLastname: string | null;
  slug?: string;
  preview?: boolean;
}

const { 
  title,
  description,
  guestName,
  guestLastname,
  secondaryName,
  secondaryLastname,
  slug,
} = Astro.props;

// Generate dynamic content based on guest info
const guestDisplayName = buildCoupleDisplayName(guestName, guestLastname, secondaryName, secondaryLastname);

const dynamicTitle = guestDisplayName 
  ? `${guestDisplayName} - Invitación XV años Julietta`
  : "Invitación XV años Julietta";

const dynamicDescription = guestDisplayName
  ? `Invitación especial para ${guestDisplayName} a los XV años de Julietta. Una celebración mágica llena de amor y alegría.`
  : "Invitación a los XV años de Julietta. Una celebración mágica llena de amor y alegría.";

const dynamicUrl = slug 
  ? `https://julifestxv.aegre.me/invite/${slug}`
  : "https://julifestxv.aegre.me";

const dynamicImage = guestName && guestLastname
  ? `/images/invitation-${slug}.webp`
  : "/images/girl.webp";
---

<Layout 
  title={title || dynamicTitle}
  description={description || dynamicDescription}
  image={dynamicImage}
  url={dynamicUrl}
  type="website"
  noIndex={true}
>
  <slot />
</Layout> 