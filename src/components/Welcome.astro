---
import MainInvitation from './sections/MainInvitation.astro';
import EventLocation from './sections/EventLocation.astro';
import DetailsRSVP from './sections/DetailsRSVP.astro';
import ThankYou from './sections/ThankYou.astro';
import ScrollManager from './ScrollManager.astro';

// Define sections configuration - easy to add/remove sections
const sections = [
  { id: 'section-main-invitation', component: MainInvitation, enabled: true },
  { id: 'section-event-location', component: EventLocation, enabled: true },
  { id: 'section-details-rsvp', component: DetailsRSVP, enabled: true },
  { id: 'section-thank-you', component: ThankYou, enabled: true }, // Enable the new section
  // Add more sections here as needed
];

// Filter enabled sections
const enabledSections = sections.filter(section => section.enabled);
const sectionIds = enabledSections.map(section => section.id);
---

<main class="min-h-screen bg-primary overflow-hidden flex items-center justify-center p-4" role="main" aria-label="QuinceaÃ±era Invitation">

  <!-- Main invitation card with scroll container -->
  <article class="relative max-w-5xl w-full text-center text-white shadow-2xl overflow-hidden h-[calc(100vh-2rem)]" role="article" aria-labelledby="event-title" aria-describedby="event-details">
    
    <!-- Scrollable content container -->
    <div id="scroll-container" class="h-full overflow-y-scroll scrollbar-hide snap-y snap-mandatory">
      <!-- Dynamically render sections -->
      <MainInvitation />
      <EventLocation />
      <DetailsRSVP />
      <ThankYou />
    </div>

    <!-- Dynamic progress indicator -->
    <ScrollManager sectionIds={sectionIds} />
  </article>
</main>

<style>
  
  /* Hide scrollbar */
  .scrollbar-hide {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }
  
  .scrollbar-hide::-webkit-scrollbar {
    display: none;
  }

  /* Screen reader only content */
  .sr-only {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border: 0;
  }

  /* Smooth scroll behavior */
  #scroll-container {
    scroll-behavior: smooth;
  }

  /* Section transitions */
  section {
    transition: opacity 0.3s ease-in-out;
  }
</style>


