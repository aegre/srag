---
import MainInvitation from './sections/MainInvitation.astro';
import CountdownTimer from './sections/CountdownTimer.astro';
import InvitationDetails from './sections/InvitationDetails.astro';
import ParentsGreetings from './sections/ParentsGreetings.astro';
import PersonalGreetings from './sections/PersonalGreetings.astro';
import Itinerary from './sections/Itinerary.astro';
import EventLocation from './sections/EventLocation.astro';
import DressCode from './sections/DressCode.astro';
import DetailsRSVP from './sections/DetailsRSVP.astro';
import ThankYou from './sections/ThankYou.astro';
import ImportantInformation from './sections/ImportantInformation.astro';
import ScrollManager from './ScrollManager.astro';

// Define sections configuration - easy to add/remove sections
const sections = [
  { id: 'section-main-invitation', component: MainInvitation, enabled: true },
  { id: 'section-countdown-timer', component: CountdownTimer, enabled: true },
  { id: 'section-invitation-details', component: InvitationDetails, enabled: true },
  { id: 'section-parents-greetings', component: ParentsGreetings, enabled: true },
  { id: 'section-personal-greetings', component: PersonalGreetings, enabled: true },
  { id: 'section-itinerary', component: Itinerary, enabled: true },
  { id: 'section-event-location', component: EventLocation, enabled: true },
  { id: 'section-dress-code', component: DressCode, enabled: true },
  { id: 'section-details-rsvp', component: DetailsRSVP, enabled: true },
  { id: 'section-important-information', component: ImportantInformation, enabled: true },
];

// Filter enabled sections
const enabledSections = sections.filter(section => section.enabled);
const sectionIds = enabledSections.map(section => section.id);
---

<main class="min-h-screen bg-primary overflow-hidden flex items-center justify-center p-4" role="main" aria-label="Quinceañera Invitation">

      <!-- Background container - 2rem bigger for background images -->
    <div class="absolute inset-0 max-w-6xl m-auto pointer-events-none overflow-hidden">
      <!-- Clouds in each corner (behind other elements) -->
      <!-- Top left cloud -->
      <div class="absolute top-0 left-0 w-80 h-80 md:w-[640px] md:h-[640px] bg-contain bg-no-repeat z-0 opacity-30" 
           style="background-image: url('images/cloud.webp'); transform: translate(-60%, -20%) rotate(40deg);">
      </div>
      
      <!-- Top right cloud -->
      <div class="absolute top-0 right-0 w-80 h-80 md:w-[640px] md:h-[640px] bg-contain bg-no-repeat z-0 opacity-30" 
           style="background-image: url('images/cloud.webp'); transform: translate(50%, -50%) rotate(90deg);">
      </div>
      
      <!-- Bottom right cloud -->
      <div class="absolute bottom-0 right-0 w-80 h-80 md:w-[640px] md:h-[640px] bg-contain bg-no-repeat z-0 opacity-30" 
           style="background-image: url('images/cloud.webp'); transform: translate(60%, 30%) rotate(300deg);">
      </div>
      
      <!-- Bottom left cloud -->
      <div class="absolute bottom-0 left-0 w-80 h-80 md:w-[640px] md:h-[640px] bg-contain bg-no-repeat z-0 opacity-30" 
           style="background-image: url('images/cloud.webp'); transform: translate(-30%, 40%) rotate(270deg);">
      </div>
      
      <!-- Top left flowers -->
      <div class="absolute top-0 left-0 w-48 md:w-92 h-48 md:h-92 bg-contain bg-no-repeat z-5" 
           style="background-image: url('images/flowers.webp');">
      </div>
      
      <!-- Bottom right flowers (rotated 180°) -->
      <div class="absolute bottom-0 right-0 w-48 md:w-92 h-48 md:h-92 bg-contain bg-no-repeat rotate-180 z-5" 
           style="background-image: url('images/flowers.webp');">
      </div>
      
      <!-- Top right drops (rotated, 50% visible) -->
      <div class="absolute top-0 right-0 w-64 h-64 bg-contain bg-no-repeat rotate-180 z-5 opacity-60" 
           style="background-image: url('images/drops.webp'); transform: translate(-40%, -5%);">
      </div>
      
      <!-- Bottom left drops (50% visible) -->
      <div class="absolute bottom-0 left-0 w-64 h-64 bg-contain bg-no-repeat z-5 opacity-60" 
           style="background-image: url('images/drops.webp'); transform: translate(-50%, 5%);">
      </div>
      
      <!-- Border container with inset -->
      <div class="absolute inset-4 border border-secondary z-0 pointer-events-none"></div>
    </div>

  <!-- Main invitation card with scroll container -->
  <article class="relative max-w-5xl w-full text-center text-white shadow-md  overflow-hidden h-[calc(100vh-2rem)]" role="article" aria-labelledby="event-title" aria-describedby="event-details">
    
  

    <!-- Scrollable content container -->
    <div id="scroll-container" class="relative z-20 h-full overflow-y-scroll scrollbar-hide snap-y snap-mandatory">
      <!-- Dynamically render sections -->
      <DressCode />
      <MainInvitation />
      <CountdownTimer />
      <InvitationDetails />
      <ParentsGreetings />
      <PersonalGreetings />
      <Itinerary />
      <EventLocation />
      
      <DetailsRSVP />
      <ImportantInformation />
    </div>

    <!-- Dynamic progress indicator -->
    <ScrollManager sectionIds={sectionIds} />
  </article>
</main>

<style>
  
  /* Hide scrollbar */
  .scrollbar-hide {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }
  
  .scrollbar-hide::-webkit-scrollbar {
    display: none;
  }

  /* Screen reader only content */
  .sr-only {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border: 0;
  }

  /* Smooth scroll behavior */
  #scroll-container {
    scroll-behavior: smooth;
  }

  /* Section transitions */
  section {
    transition: opacity 0.3s ease-in-out;
  }
</style>


