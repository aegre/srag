---
import InvitationSection from '../InvitationSection.astro';
import EventDetail from '../EventDetail.astro';
import { getDayNumber, getMonthName, getDayOfWeek, formatTime } from '../../utils/dateUtils';

export interface Props {
  settings?: any;
}

const { settings } = Astro.props;

// Use settings if available, otherwise fallback to defaults
const eventDate = settings?.event_date || '2024-09-13';
const eventTime = settings?.event_time || '19:00';
const dayNumber = getDayNumber(eventDate);
const monthName = getMonthName(eventDate);
const dayOfWeek = getDayOfWeek(eventDate);
const formattedTime = formatTime(eventTime);
---

<InvitationSection id="section-main-invitation">

  <div class="relative z-10 space-y-8" id="event-details">
    <!-- Event type header -->
    <header class="space-y-3">
      <p class="font-hero text-sm tracking-[0.25em] text-secondary-light uppercase font-medium" role="subtitle">
        Mis XV AÃ±os
      </p>
      <hr class="w-16 h-px bg-gradient-to-r from-transparent via-secondary-light to-transparent mx-auto border-0" aria-hidden="true" />
    </header>

    <!-- Celebrant name -->
    <section class="space-y-6">
      <h1 id="event-title" class="font-angella text-8xl md:text-9xl text-secondary-light leading-tight drop-shadow-2xl">
        Julietta
      </h1>
      <hr class="w-24 h-px bg-gradient-to-r from-transparent via-secondary-light to-transparent mx-auto border-0" aria-hidden="true" />
    </section>

    <!-- Event details -->
    <section class="space-y-6 pt-4" aria-label="Event date and time">
      <div class="flex items-center text-secondary font-hero justify-center space-x-1 md:space-x-12">
        <!-- Day of week -->
        <EventDetail content={dayOfWeek} srText="Day of the week: " />

        <!-- Date -->
        <div class="text-center lg:space-y-2">
          <time datetime={eventDate} class="font-serif text-5xl mb-1 font-light text-secondary-light drop-shadow-xl">
            {dayNumber}
          </time>
          <p class="font-hero text-xs mt-1 tracking-[0.2em] text-secondary-light uppercase font-light">
            <span class="sr-only">Month: </span>
            {monthName}
          </p>
        </div>

        <!-- Time -->
        <EventDetail content={formattedTime} srText="Time: " datetime={eventTime} type="time" />
        </div>
        <div class="flex pt-4 justify-center w-full">
          <div class="animate-bounce">
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 14l-7 7m0 0l-7-7m7 7V3"/>
            </svg>
          </div>
      </div>
    </section>

    <!-- Scroll indicator -->
    
  </div>
  
</InvitationSection> 